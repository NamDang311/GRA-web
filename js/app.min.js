function animateTop(){var e=$("#top"),t=new TimelineMax({repeat:-1,repeatDelay:3});t.from(e,.2,{rotationY:360,ease:Power0.easeNone,repeat:-1,transformOrigin:"50% 0 0"})}function appendData(){for(a=0;a<=12;a++)$(".data-"+a).css({height:"10px",position:"absolute",top:"0","background-color":"#e6665a",width:50*parseFloat(dataAr[a])}),barWidth.push($(".data-"+a).css("width"))}function addNumber(e){totalNumber+=parseFloat(dataAr[e]),$("#totalNumber").countTo({from:curNumber,to:totalNumber,speed:400,refreshInterval:10,formatter:function(e,t){return e.toFixed(1).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")},onComplete:function(e){curNumber=totalNumber}})}function fadedAni(){visibleEl=$(".circle-ripple").visible(),didScroll&&!visibleEl&&(didScroll=!1,$("#totalTitle, #totalNumber").each(function(){TweenLite.fromTo($(this),2,{css:{left:"-=100vw",opacity:0}},{css:{left:"+=100vw",opacity:1},onComplete:function(){didScroll=!0}})}))}$(document).foundation(),$(".main").onepage_scroll({pagination:!0,loop:!1}),$("#bulb-btn").click(function(){TweenMax.to("#section1-bg1",3,{opacity:0,ease:Power2.easeInOut})}),function(){$("#range").slider({range:"min",min:0,max:100,value:0,slide:function(e,t){$("").css({"margin-left":t.value}),$("#co2value").html(t.value/25)}})}.call(this),$(function(){$("#timeline").slider({orientation:"vertical",range:"min",min:0,max:5,value:5,step:1,slide:function(e,t){tl.from($rotar,.2,{rotationY:360,ease:Power0.easeNone,repeat:-1,transformOrigin:"50% 0 0"})}})}),d3.xml("/img/helicopter.svg","image/svg+xml",function(e,t){if(e)throw e;document.getElementById("helicopter").appendChild(t.documentElement),animateTop()}),Draggable.create(".handler-wrapper",{type:"y",bounds:{top:0,left:0,height:100},throwProps:!0,edgeResistance:.7,onDragEnd:function(){TweenLite.from($(".handler-wrapper"),.4,{top:0,ease:Elastic.easeOut})}}),d3.xml("/img/worldmap.svg","image/svg+xml",function(e,t){if(e)throw e;document.getElementById("worldmap").appendChild(t.documentElement)});var popupheight=parseInt($("#popup").css("height"))+20,popupwidth=parseInt($("#popup").css("width"))/2,myAr=$(".circle-ripple").toArray(),trigger=!0,topPos1=10;$(".circle-ripple").bind("click",function(e){var t=$.inArray(this,myAr),a=$(this).offset().top-popupheight;$(this).hasClass("activated")||($(this).addClass("activated"),TweenLite.fromTo($(this),1,{scale:1,transformOrigin:"50% 50% 0",force3D:!0},{opacity:.7,scale:parseFloat(dataAr[t])})),$("#popup").css("left",$(this).offset().left-popupwidth),$("#popup").css("display","inline"),$("#popup").css("position","absolute"),TweenLite.fromTo($("#popup"),1,{opacity:0,top:a-20},{opacity:1,top:a}),$(".name-"+t).hasClass("clicked")||(addNumber(t),$(".continent-"+t).removeClass("hidden"),$(".name-"+t).css({top:topPos1+"%"}).addClass("clicked"),$(".data-"+t).css({top:topPos1+6+"%"}),topPos1+=10,TweenLite.fromTo($(".data-"+t),1,{width:0},{width:barWidth[t]}))});var dataAr=[],nameAr=[],barWidth=[];$.ajax({type:"GET",url:"/worlddata.xml",dataType:"xml",success:function(e){for(t=0;t<=12;t++)dataAr.push($(e).find("data:eq("+t+")").text()),nameAr.push($(e).find("name:eq("+t+")").text());trigger&&(appendData(),trigger=!trigger)}});var totalNumber=0,curNumber=0,leftPos=50;$.each($(".findout-content"),function(){$(this).css({left:leftPos+"vw"}),leftPos+=100}),$(".findout").click(function(){TweenLite.to($(".findoutWrapper"),1,{left:"-=100%"})});var didScroll=!0,visibleEl;